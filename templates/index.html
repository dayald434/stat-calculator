<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Statistical Calculator - Iteration 1</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
</head>
<body>
    <div class="container">
        <header>
            <h1>ğŸ“Š Statistical Calculator</h1>
            <p class="subtitle">Geo statistics, hypothesis tests, and correlation analysis</p>
        </header>

        <div class="tabs">
            <button class="tab-button active" data-tab="descriptive">
                ğŸ“ˆ Descriptive Stats
            </button>
            <button class="tab-button" data-tab="ttest">
                ğŸ”¬ T-Test
            </button>
            <button class="tab-button" data-tab="chisquare">
                ğŸ“Š Chi-Square
            </button>
            <button class="tab-button" data-tab="correlation">
                ğŸ“‰ Correlation
            </button>
        </div>

        <!-- Descriptive Statistics Tab -->
        <div class="tab-content active" id="descriptive">
            <h2>Descriptive Statistics</h2>
            <p class="instruction">Enter numbers separated by commas or upload a CSV file:</p>
            <textarea id="descriptive-input" placeholder="Example: 12, 15, 18, 20, 22, 25, 28" rows="3"></textarea>
            <div class="file-upload-section">
                <label for="descriptive-file" class="file-label">ğŸ“ Or upload CSV:</label>
                <input type="file" id="descriptive-file" accept=".csv" onchange="handleFileUpload(this, 'descriptive')">
                <span id="descriptive-filename" class="filename"></span>
            </div>
            <button class="btn-calculate" onclick="calculateDescriptive()">Calculate Statistics</button>
            <div class="csv-help">
                <details>
                    <summary>ğŸ“Š CSV Format Example</summary>
                    <pre>12,15,18,20,22,25,28
or
12
15
18
20
22
25
28</pre>
                </details>
            </div>
            <div id="descriptive-result" class="result"></div>
            <div id="descriptive-chart-container" class="chart-container" style="display: none;">
                <canvas id="descriptive-chart"></canvas>
                <div class="chart-explanation">
                    <h4>ğŸ“– Understanding the Chart</h4>
                    <p><strong>Frequency Distribution Histogram:</strong> Each bar shows how many values fall within a range. Taller bars = more values in that range.</p>
                    <ul>
                        <li><strong>Shape:</strong> Look for patterns - bell-shaped (normal), skewed (one-sided), or multimodal (multiple peaks)</li>
                        <li><strong>Mean vs Median:</strong> If similar, data is symmetric. If different, data is skewed</li>
                        <li><strong>Spread:</strong> Wide distribution = high variability; narrow = low variability</li>
                        <li><strong>Outliers:</strong> Isolated bars far from the cluster may indicate outliers</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- T-Test Tab -->
        <div class="tab-content" id="ttest">
            <h2>One-Sample T-Test</h2>
            <p class="instruction">Enter sample data (line 1) and population mean (line 2) or upload CSV:</p>
            <textarea id="ttest-input" placeholder="Example:&#10;10, 12, 14, 16, 18&#10;15" rows="4"></textarea>
            <div class="file-upload-section">
                <label for="ttest-file" class="file-label">ğŸ“ Or upload CSV:</label>
                <input type="file" id="ttest-file" accept=".csv" onchange="handleFileUpload(this, 'ttest')">
                <span id="ttest-filename" class="filename"></span>
            </div>
            <button class="btn-calculate" onclick="calculateTTest()">Calculate T-Test</button>
            <div class="csv-help">
                <details>
                    <summary>ğŸ“Š CSV Format Example</summary>
                    <pre>10,12,14,16,18,15
(Last value is population mean)</pre>
                </details>
            </div>
            <div id="ttest-result" class="result"></div>
            <div id="ttest-chart-container" class="chart-container" style="display: none;">
                <canvas id="ttest-chart"></canvas>
                <div class="chart-explanation">
                    <h4>ğŸ“– Understanding the Chart</h4>
                    <p><strong>Sample Distribution vs Population Mean:</strong> Blue bars show where your sample values cluster. The red dashed line is the population mean (hypothesized value).</p>
                    <ul>
                        <li><strong>Line overlaps bars:</strong> Sample mean â‰ˆ population mean â†’ NOT significant (fail to reject null hypothesis)</li>
                        <li><strong>Line far from bars:</strong> Sample mean â‰  population mean â†’ SIGNIFICANT (reject null hypothesis)</li>
                        <li><strong>p-value < 0.05:</strong> Strong evidence the sample differs from population mean</li>
                        <li><strong>Spread of bars:</strong> Shows variability in your sample data</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Chi-Square Tab -->
        <div class="tab-content" id="chisquare">
            <h2>Chi-Square Goodness of Fit Test</h2>
            <p class="instruction">Enter observed (line 1) and expected (line 2) frequencies or upload CSV:</p>
            <textarea id="chisquare-input" placeholder="Example:&#10;25, 30, 45&#10;33.3, 33.3, 33.3" rows="4"></textarea>
            <div class="file-upload-section">
                <label for="chisquare-file" class="file-label">ğŸ“ Or upload CSV:</label>
                <input type="file" id="chisquare-file" accept=".csv" onchange="handleFileUpload(this, 'chisquare')">
                <span id="chisquare-filename" class="filename"></span>
            </div>
            <button class="btn-calculate" onclick="calculateChiSquare()">Calculate Chi-Square</button>
            <div class="csv-help">
                <details>
                    <summary>ğŸ“Š CSV Format Example</summary>
                    <pre>25,30,45
33.3,33.3,33.3
(Row 1: Observed, Row 2: Expected)</pre>
                </details>
            </div>
            <div id="chisquare-result" class="result"></div>
            <div id="chisquare-chart-container" class="chart-container" style="display: none;">
                <canvas id="chisquare-chart"></canvas>
                <div class="chart-explanation">
                    <h4>ğŸ“– Understanding the Chart</h4>
                    <p><strong>Grouped Bar Chart - Observed vs Expected:</strong> Blue bars = actual counts observed; Red bars = counts you would expect if categories were equal/independent.</p>
                    <ul>
                        <li><strong>Bars overlap:</strong> Observed â‰ˆ Expected â†’ NOT significant (no association)</li>
                        <li><strong>Large gaps:</strong> Observed â‰  Expected â†’ SIGNIFICANT (strong association or deviation)</li>
                        <li><strong>p-value < 0.05:</strong> Data significantly differs from what you'd expect by chance</li>
                        <li><strong>Chi-square statistic:</strong> Larger value = bigger difference = more significant</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Correlation Tab -->
        <div class="tab-content" id="correlation">
            <h2>Pearson Correlation Analysis</h2>
            <p class="instruction">Enter X values (line 1) and Y values (line 2) or upload CSV:</p>
            <textarea id="correlation-input" placeholder="Example:&#10;1, 2, 3, 4, 5&#10;2, 4, 6, 8, 10" rows="4"></textarea>
            <div class="file-upload-section">
                <label for="correlation-file" class="file-label">ğŸ“ Or upload CSV:</label>
                <input type="file" id="correlation-file" accept=".csv" onchange="handleFileUpload(this, 'correlation')">
                <span id="correlation-filename" class="filename"></span>
            </div>
            <button class="btn-calculate" onclick="calculateCorrelation()">Calculate Correlation</button>
            <div class="csv-help">
                <details>
                    <summary>ğŸ“Š CSV Format Example</summary>
                    <pre>1,2,3,4,5
2,4,6,8,10
(Row 1: X values, Row 2: Y values)</pre>
                </details>
            </div>
            <div id="correlation-result" class="result"></div>
            <div id="correlation-chart-container" class="chart-container" style="display: none;">
                <canvas id="correlation-chart"></canvas>
                <div class="chart-explanation">
                    <h4>ğŸ“– Understanding the Chart</h4>
                    <p><strong>Scatter Plot with Regression Line:</strong> Each blue dot = one data point. Red dashed line = best-fit line showing the relationship trend.</p>
                    <ul>
                        <li><strong>Points cluster tight around line:</strong> Strong correlation (r near Â±1)</li>
                        <li><strong>Points spread far from line:</strong> Weak correlation (r near 0)</li>
                        <li><strong>Line slopes up:</strong> Positive correlation (as X increases, Y increases)</li>
                        <li><strong>Line slopes down:</strong> Negative correlation (as X increases, Y decreases)</li>
                        <li><strong>RÂ² value:</strong> % of Y variation explained by X (higher = better fit)</li>
                        <li><strong>p-value < 0.05:</strong> Correlation is statistically significant</li>
                    </ul>
                </div>
            </div>
        </div>

    </div>

    <script src="{{ url_for('static', filename='script.js') }}"></script>
</body>
</html>